
//<![CDATA[
$(function(){
	var hsort_flg = false;

	//setup
	var vg = $("#grid-content").vgrid({
		easing: "easeOutQuint",
		time: 400,
		delay: 20,
		fadeIn: {
			time: 500,
			delay: 50,
			wait: 500
		},
		onStart: function(){
			$("#message1")
				.css("visibility", "visible")
				.fadeOut("slow",function(){
					$(this).show().css("visibility", "hidden");
				});
		},
		onFinish: function(){
			$("#message2")
				.css("visibility", "visible")
				.fadeOut("slow",function(){
					$(this).show().css("visibility", "hidden");
				});
		}
	});
	$(window).load(function(e){
		vg.vgrefresh();
	});

	//add item
	$("#additem").click(function(e){
		var _item = $('<div>\
				<h3>New Item</h3>\
				<p>Foo</p>\
				<p><a href="#">DELETE</a></p>\
			</div>')
			.fadeTo(0, 0)
			.addClass(Math.random() > 0.3 ? 'wn' : 'wl')
			.addClass(Math.random() > 0.3 ? 'hn' : 'hl');
		vg.prepend(_item);
		vg.vgrefresh(null, null, null, function(){
			_item.fadeTo(300, 1);
		});
		hsort_flg = true;
	});

	//delete
	vg.on('click', 'a', function(e){
		$(this).parent().parent().fadeOut(200, function(){
			$(this).remove();
			vg.vgrefresh();
		});
		return false;
	});

	//sort
	$("#hsort").click(function(e){
		hsort_flg = !hsort_flg;
		$("#grid-content").vgsort(function(a, b){
			var _a = $(a).find('h3').text();
			var _b = $(b).find('h3').text();
			var _c = hsort_flg ? 1 : -1 ;
			return (_a > _b) ? _c * -1 : _c ;
		}, "easeInOutExpo", 300, 0);
		return false;
	});
	$("#rsort").click(function(e){
		$("#grid-content").vgsort(function(a, b){
			return Math.random() > 0.5 ? 1 : -1 ;
		}, "easeInOutExpo", 300, 20);
		hsort_flg = true;
		return false;
	});
});
//]]>
